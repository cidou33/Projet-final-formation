<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Page de profil avec possibilité de modifier celui-ci et accès aux transcriptions mise en favori" />
    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/base.css') }}">
    <title>Mon profil</title>
</head>
<body>
    {% include 'commons/header.html.twig' %}
    <main class="mainProfil {% if is_granted('ROLE_ADMIN') %}adminMainHomePage{% else %}mainHomePage{% endif %} mainTranscriptions">
        {% block body %}
        <section>
            <div class="bgTitleProfil">
                <h1 class="textWhite titleProfil">profil de {{ user.username }}</h1>
            </div>
            <form action="{{ path('updateUser') }}" method="POST" name="categoryBtn" enctype="multipart/form-data">
                <label for="username">Nouveau pseudo :</label>
                <input class="inputUsername" type="text" name="username" value="{{ user.username }}">
                <label for="avatar">Nouvel avatar :</label>
                <input class="inputUsername" type="file" name="avatar[]">
                <input class="inputButton" type="submit" class="btn" name="btn"></input>
            </form>
                {% for favori in user.favoris %}
                    <article>
                        <div class="transcriptionContainer">
                            <div class="infoTranscription">
                                <span class="textWhite">{{ favori.bandName }}</span>
                                <span class="textWhite">{{ favori.songName }}</span>
                                <div class="difficultyToken {{ favori.difficultyLevel.color }}"></div>
                            </div>
                            {% if connect == false %}
                                <div class="favoriContainer">
                                    <a class="textWhite" href="{{ path('modifyFavori',{'id':favori.id}) }}">Supprimer le favori</a>
                                </div>
                            {% endif %}
                            <div class="buttonTranscription">
                                <a class="textWhite" href="{{ asset('assets/data/pdf/uploadTrainings/' ~ favori.pdfFile) }}" download="{{ favori.pdfFile }}">Telecharger</a>
                                <a class="textWhite" href="{{ path('showTranscriptionAndVideo', {'id':favori.id}) }}">
                                    <img class="logoYoutube" src="{{ asset('assets/data/img/media/logo_youtube.png') }}" alt="logo youtube en couleur">
                                    <span>Voir</span>
                                </a>
                            </div>
                        </div>
                    </article>
                {% endfor %}
            <div class="deleteContainer">
                <a class="textWhite red deleteAccountButton" href="{{ path('deleteUser') }}" onclick="return confirm('Etes vous certain de vouloir supprimer vote compte?');">SUPPRIMER SON COMPTE</a>
            </div>
        </section>
        {% endblock %}
    </main>
    {% include 'commons/footer.html.twig' %}
    {% if is_granted('ROLE_ADMIN') %}
    <script async src="{{ asset('assets/js/scriptAdmin.js') }}"></script>
    {% endif %}
    <script async src="{{ asset('assets/js/scriptUser.js') }}"></script>
</body>
</html>